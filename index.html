<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>SAL DEL SERI | Pedido</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    font-family: Arial, sans-serif;
    background:#f5f5f5;
    margin:0;
    padding:20px;
}
.contenedor{
    max-width:900px;
    margin:auto;
    background:#fff;
    padding:25px;
    border-radius:8px;
    box-shadow:0 2px 10px rgba(0,0,0,.1);
}
.logo{
    text-align:center;
    margin-bottom:10px;
}
.logo img{
    max-width:220px;
}
p{color:#666;font-size:14px;text-align:center;}
.seccion{margin-top:25px;}
.seccion h3{
    border-bottom:1px solid #e0e0e0;
    padding-bottom:5px;
}
.fila{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:15px;
}
.campo{
    display:flex;
    flex-direction:column;
}
label{
    font-size:14px;
    margin-bottom:5px;
}
input{
    padding:10px;
    border:1px solid #ccc;
    border-radius:5px;
    font-size:14px;
}
input:focus{
    outline:none;
    border-color:#4CAF50;
}
.resumen{
    background:#f0f0f0;
    padding:15px;
    border-radius:5px;
    font-size:15px;
}
.fecha{
    font-size:13px;
    color:#333;
    margin-top:10px;
}
.boton{
    text-align:right;
    margin-top:25px;
}
button{
    background:#25D366;
    color:#fff;
    border:none;
    padding:12px 25px;
    font-size:15px;
    border-radius:5px;
    cursor:pointer;
}
button:hover{
    background:#1ebe5d;
}
@media(max-width:700px){
    .fila{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<div class="contenedor">

    <div class="logo">
        <img src="yiyi.png" alt="SAL DEL SERI">
    </div>

    <p>Pedido de sacos de sal (1 saco = 25 bolsas de 1 kg)</p>

    <div class="fecha" id="fechaHora"></div>

    <div class="seccion">
        <h3>Datos del Negocio</h3>
        <div class="campo">
            <label>Nombre del Negocio *</label>
            <input type="text" id="negocio">
        </div>
        <div class="campo">
            <label>Responsable *</label>
            <input type="text" id="responsable">
        </div>
        <div class="campo">
            <label>Tel√©fono *</label>
            <input type="tel" id="telefono">
        </div>
        <div class="campo">
            <label>Direcci√≥n del Negocio *</label>
            <input type="text" id="direccion">
        </div>
    </div>

    <div class="seccion">
        <h3>Pedido</h3>
        <div class="fila">
            <div class="campo">
                <label>Cantidad de Sacos *</label>
                <input type="number" id="sacos" min="1" oninput="calcular()">
            </div>
            <div class="campo">
                <label>Precio por Saco</label>
                <input type="text" value="$135 MXN" disabled>
            </div>
        </div>

        <div class="resumen" id="resumen">
            Total: $0 MXN
        </div>
    </div>

    <div class="boton">
        <button onclick="enviarWhats()">Enviar por WhatsApp</button>
    </div>

</div>

<!-- üî• FIREBASE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDMBBaEgAk1EuRj7QSMqVsxnlC7aUvMz5w",
    authDomain: "sal-del-seri.firebaseapp.com",
    projectId: "sal-del-seri",
    storageBucket: "sal-del-seri.firebasestorage.app",
    messagingSenderId: "465867166498",
    appId: "1:465867166498:web:683a92396f3e369df4cb7b"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.db = db;
  window.addDoc = addDoc;
  window.collection = collection;
</script>

<!-- üß† L√ìGICA -->

    <script>
const PRECIO_SACO = 135;

const WHATSAPP_NUMEROS = [
  "5216621498544",
  "5216622721644"
];

function obtenerFechaHora(){
  return new Date().toLocaleString("es-MX");
}
</script>

<script>
async function enviarWhats(){
    const negocio = document.getElementById("negocio").value.trim();
    const responsable = document.getElementById("responsable").value.trim();
    const telefono = document.getElementById("telefono").value.trim();
    const direccion = document.getElementById("direccion").value.trim();
    const sacos = document.getElementById("sacos").value;

    if(!negocio || !responsable || !telefono || !direccion || !sacos){
        alert("Completa todos los campos ‚ùå");
        return;
    }

    if(!confirm("¬øConfirmas que deseas enviar el pedido?")) return;

    const total = sacos * PRECIO_SACO;
    const bolsas = sacos * 25;
    const fechaHora = obtenerFechaHora();

    // üî• Guardar en Firestore
    try{
        await addDoc(collection(db,"pedidos"),{
            negocio,
            responsable,
            telefono,
            direccion,
            sacos: Number(sacos),
            bolsas,
            total,
            fechaHora,
            estado: "pendiente",
            timestamp: new Date()
        });
    }catch(error){
        alert("Error al guardar el pedido ‚ùå");
        console.error(error);
        return;
    }

    // üì≤ Mensaje WhatsApp
    const mensaje =
`üßÇ SAL DEL SERI
üìÖ ${fechaHora}
üè™ ${negocio}
üë§ ${responsable}
üìû ${telefono}
üìç ${direccion}
üßÇ Sacos: ${sacos}
üõçÔ∏è Bolsas: ${bolsas}
üí∞ TOTAL: $${total} MXN`;

    WHATSAPP_NUMEROS.forEach(n=>{
        const url = `https://wa.me/${n}?text=${encodeURIComponent(mensaje)}`;
        window.open(url, "_blank");
    });
}
</script>

</body>
</html>






